<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>java并发编程 | frozeNwInd</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.3.1/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">java并发编程</h1><a id="logo" href="/.">frozeNwInd</a><p class="description">吕成锋的博客</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/history/"><i class="fa fa-history"> 由来</i></a><a href="/MoonAndStar/"><i class="fa fa-heart"> MoonAndStar</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">java并发编程</h1><div class="post-meta">May 17, 2019<span> | </span><span class="category"><a href="/categories/technology/">technology</a></span></div><a class="disqus-comment-count" href="/2019/05/17/java并发编程/#vcomment"><span class="valine-comment-count" data-xid="/2019/05/17/java并发编程/"></span><span> 条评论</span></a><div class="post-content"><p>原子性<br>可见性<br>有序性</p>
<h4 id="并方包"><a href="#并方包" class="headerlink" title="并方包"></a>并方包</h4><p>Thread、Runnable、Callable、ReentrantLock、ReentrantReadWriteLock、Atomic、Semaphore、CountDownLatch、ConcurrentHashMap、Executors</p>
<h4 id="高可用高性能高并发"><a href="#高可用高性能高并发" class="headerlink" title="高可用高性能高并发"></a>高可用高性能高并发</h4><h4 id="并发与并行"><a href="#并发与并行" class="headerlink" title="并发与并行"></a>并发与并行</h4><p>什么是并发、什么是并行<br>并发与并行的区别<br>并行是两个或多个任务在同一时刻同时进行，需要多核CPU的支持；并发是两个或多个任务都请求运行，而处理器只能接受一个任务，就安排这几个任务轮流进行，宏观上是有多个任务在同时进行，实际上是因为CPU在不同的任务之间不停的切换，多个任务分时交替进行。并行是不抢占资源的，并发的多个任务之间是互相抢占资源的，只有多核CPU下才会并行执行。并发通常是提高运行在单处理器上的程序的性能。</p>
<h4 id="什么是线程，与进程的区别"><a href="#什么是线程，与进程的区别" class="headerlink" title="什么是线程，与进程的区别"></a>什么是线程，与进程的区别</h4><p>线程的实现、线程的状态、优先级、线程调度、创建线程的多种方式、守护线程<br>线程与进程的区别</p>
<p><strong>什么是线程</strong>：每个可以独立运行的程序都是一个进程，在一个进程中可以有多个执行单元同时运行，这些执行单元可以看作程序执行的一个个任务，被称为线程。操作系统中的每一个进程中至少存在一个线程，进程是资源分配的基本单元，线程是CPU调度的基本单位(在没有引入线程的时候，进程是资源分配和CPU调度的基本单位；引入进程是为了使多个程序能并发执行，提高资源利用率和系统吞吐量，引入线程是为了减少进程在并发执行时所付出的时空开销，线程切换比进程切换的开销要小，使操作系统具有更好的并发性。)<br><img src="/2019/05/17/java并发编程/进程和线程.png" alt=""><br>线程就是独立的执行路径。在程序运行时，即使没有自己创建线程，后台也会存在多个线程，如gc线程、主线程；mian()称为主线程，为系统的入口点，用于执行整个程序。<br>在一个进程中，如果开辟了多个线程，线程的运行由调度器安排调度，调度器是与操作系统紧密相关的，先后顺序是不能人为干预的。对同一份资源操作时，会存在资源抢夺的问题，需要加入并发控制。线程会带来额外的开销，如cpu调度时间、并发控制开销。Java内存模型中，每个线程在自己的工作内存交互，加载和存储主内存控制不当会造成数据不一致。</p>
<p><strong>线程的实现</strong>：<br>1)内核支持线程(Kernel Supported Threads)<br>2)用户级线程(User Level Threads)<br>3)组合方式</p>
<p><strong>创建多线程的方式</strong>：<br>少用继承，多用实现。<br>1)继承Thread类，重写Thread类的run()方法，调用继承自Thead类的start()方法开启线程。<br><img src="/2019/05/17/java并发编程/thread.png" alt=""><br>2)实现Runnable接口，重写run()方法。通过new一个Thread(Runnable target)对象调用start()方法开启线程。<br><img src="/2019/05/17/java并发编程/runnable.png" alt=""><br>3)实现Callable接口，重写call()方法。(j.u.c并发包下，用的不多)<br><img src="/2019/05/17/java并发编程/callable.png" alt=""></p>
<p><strong>守护线程和用户线程</strong>：默认情况下，我们所创建的线程都是用户线程；被标记为守护线程的线程，程序不会等它执行完才停止，当所有的用户线程都执行完了程序就停止了，守护线程为用户线程服务。</p>
<p><strong>线程的状态</strong>：<br><img src="/2019/05/17/java并发编程/线程状态.png" alt=""><br><img src="/2019/05/17/java并发编程/线程状态2.png" alt=""><br><img src="/2019/05/17/java并发编程/线程状态转换.jpg" alt=""><br>新生状态：创建一个线程对象后，该线程对象就处于新建状态，此时它不能运行，和其他java对象一样，仅仅由java虚拟机为其分配了内存，没有表现出任何线程的动态特征。<br>就绪状态：当线程对象调用了start()方法后，该线程就进入就绪状态(也称可运行状态)。处于就绪状态的线程位于可运行池中，此时它只是具备了运行的条件，能否获得CPU的使用权开始运行，还需要等待系统的调度。<br>运行状态：如果处于就绪状态的线程获得了CPU的使用权，开始执行run()方法中的线程执行体，则该线程处于运行状态。当一个线程启动后，它不可能一直处于运行状态(除非它的线程执行体足够短，瞬间就结束了)，当使用完系统分配的时间后，系统就会剥夺该线程占用的CPU资源，让其他线程获得执行的机会。只有处于就绪状态的线程才会转换到运行状态。<br>死亡状态：线程的run()方法正常执行完毕或者线程抛出一个未捕获的异常Exception、错误Error，线程就进入死亡状态。一旦进入死亡状态，线程将不再拥有运行的资格，也不能再转换到其他状态。<br>阻塞状态：一个正在执行的线程在某些情况下，会放弃CPU的使用权，进入阻塞状态。线程进入阻塞状态后，就不能进入排队队列。只有当引起阻塞的原因被消除后，线程才可以转为就绪状态。</p>
<h4 id="线程池"><a href="#线程池" class="headerlink" title="线程池"></a>线程池</h4><p>自己设计线程池、submit() 和 execute()、线程池原理<br>为什么不允许使用 Executors 创建线程池</p>
<h4 id="线程安全"><a href="#线程安全" class="headerlink" title="线程安全"></a>线程安全</h4><p>死锁、死锁如何排查、线程安全和内存模型的关系</p>
<h4 id="锁"><a href="#锁" class="headerlink" title="锁"></a>锁</h4><p>CAS、乐观锁与悲观锁、数据库相关锁机制、分布式锁、偏向锁、轻量级锁、重量级锁、monitor、锁优化、锁消除、锁粗化、自旋锁、可重入锁、阻塞锁、死锁</p>
<h4 id="死锁"><a href="#死锁" class="headerlink" title="死锁"></a>死锁</h4><p>什么是死锁<br>死锁如何解决 </p>
<h4 id="synchronized"><a href="#synchronized" class="headerlink" title="synchronized"></a>synchronized</h4><p>synchronized 是如何实现的？<br>synchronized 和 lock 之间关系、不使用 synchronized 如何实现一个线程安全的单例<br>synchronized 和原子性、可见性和有序性之间的关系</p>
<h4 id="volatile"><a href="#volatile" class="headerlink" title="volatile"></a>volatile</h4><p>happens-before、内存屏障、编译器指令重排和 CPU 指令重<br>volatile 的实现原理<br>volatile 和原子性、可见性和有序性之间的关系<br>有了 symchronized 为什么还需要 volatile</p>
<h4 id="sleep-和-wait"><a href="#sleep-和-wait" class="headerlink" title="sleep 和 wait"></a>sleep 和 wait</h4><h4 id="wait-和-notify"><a href="#wait-和-notify" class="headerlink" title="wait 和 notify"></a>wait 和 notify</h4><h4 id="notify-和-notifyAll"><a href="#notify-和-notifyAll" class="headerlink" title="notify 和 notifyAll"></a>notify 和 notifyAll</h4><h4 id="ThreadLocal"><a href="#ThreadLocal" class="headerlink" title="ThreadLocal"></a>ThreadLocal</h4><h4 id="写一个死锁的程序"><a href="#写一个死锁的程序" class="headerlink" title="写一个死锁的程序"></a>写一个死锁的程序</h4><h4 id="写代码来解决生产者消费者问题"><a href="#写代码来解决生产者消费者问题" class="headerlink" title="写代码来解决生产者消费者问题"></a>写代码来解决生产者消费者问题</h4><h4 id="lambda表达式"><a href="#lambda表达式" class="headerlink" title="lambda表达式"></a>lambda表达式</h4><p>避免匿名内部类定义过多，其实质属于函数式编程的概念。<br>lambda表达式简化简单线程(用一次)的使用</p>
</div><div class="tags"><a href="/tags/java基础/">java基础</a></div><div class="post-nav"><a class="pre" href="/2019/05/17/java基础知识/">java基础知识</a><a class="next" href="/2019/05/15/基于SpringBoot的校园商铺平台/">项目2.0 基于SpringBoot的校园商铺平台</a></div><div id="vcomment"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script><script>var notify = 'false' == true ? true : false;
var verify = 'false' == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'6Cf3b4KjUDTblsuWBz4jJcdU-gzGzoHsz',
  appKey:'l6wP9udo8YARTJrXperWuWgE',
  placeholder:'我想听你说一句… （留言请填写您的昵称和邮箱，方便回复以邮件形式通知您）',
  avatar:'retro',
  guest_info:guest_info,
  pageSize:'10'
})</script></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"><input type="hidden" name="si" value="https://blog.frozenwind.online"><input name="tn" type="hidden" value="bds"><input name="cl" type="hidden" value="3"><input name="ct" type="hidden" value="2097152"><input name="s" type="hidden" value="on"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/emotion/">emotion</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/technology/">technology</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/词/" style="font-size: 15px;">词</a> <a href="/tags/随笔/" style="font-size: 15px;">随笔</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/spring/" style="font-size: 15px;">spring</a> <a href="/tags/java-web/" style="font-size: 15px;">java web</a> <a href="/tags/阿里云服务器/" style="font-size: 15px;">阿里云服务器</a> <a href="/tags/一言/" style="font-size: 15px;">一言</a> <a href="/tags/java基础/" style="font-size: 15px;">java基础</a> <a href="/tags/markdown/" style="font-size: 15px;">markdown</a> <a href="/tags/情书/" style="font-size: 15px;">情书</a> <a href="/tags/数据结构与算法/" style="font-size: 15px;">数据结构与算法</a> <a href="/tags/java虚拟机/" style="font-size: 15px;">java虚拟机</a> <a href="/tags/系统问题/" style="font-size: 15px;">系统问题</a> <a href="/tags/MySQL/" style="font-size: 15px;">MySQL</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/05/30/和小北说的999句话/">和小北说的999句话</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/29/数据结构与算法——树/">数据结构与算法——树</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/28/落寞诗人/">假如我是一个诗人</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/26/捞月亮的人/">捞月亮的人披着风</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/17/java网络编程/">java网络编程</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/17/java基础知识/">java基础知识</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/17/java并发编程/">java并发编程</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/15/基于SpringBoot的校园商铺平台/">项目2.0 基于SpringBoot的校园商铺平台</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/15/深入理解JVM——java与线程/">深入理解JVM——12.4java与线程</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/15/深入理解JVM——java内存模型/">深入理解JVM——12.3java内存模型</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://blog.scarboroughcoral.top/" title="scarboroughcoral" target="_blank">scarboroughcoral</a><ul></ul><a href="http://blog.wangxuyao.club/" title="冰冰冰淇淋君icecream" target="_blank">冰冰冰淇淋君icecream</a><ul></ul><a target="_blank"></a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">frozeNwInd.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.css"><script type="text/javascript" color="100,99,98" opacity="0.7" zindex="-1" count="150" src="//lib.baomitu.com/canvas-nest.js/2.0.3/canvas-nest.umd.js"></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>